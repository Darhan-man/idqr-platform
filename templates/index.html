<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="ru" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDQR: Вход в систему</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Particles.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <!-- Vanilla Tilt CDN for 3D tilt -->
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js"></script>
    <style>
        /* Custom CSS for advanced effects */
        body {
            overflow: hidden;
            background: linear-gradient(135deg, #1e3c72, #2a5298); /* Futuristic gradient */
            transition: background 0.5s ease;
        }
        .dark body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        }
        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
        }
        .dark .glass {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Parallax layers */
        .parallax-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://source.unsplash.com/random/1920x1080/?abstract') no-repeat center/cover;
            transform: translateZ(-1px) scale(1.5);
            z-index: -2;
        }
        .parallax-trees {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://source.unsplash.com/random/1920x1080/?forest') no-repeat center/cover;
            transform: translateZ(-0.5px) scale(1.25);
            z-index: -1;
        }
        /* Falling leaves animation */
        .leaves {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        .leaf {
            position: absolute;
            width: 50px;
            height: 50px;
            background: url('https://img.icons8.com/color/48/000000/autumn.png') no-repeat center/contain;
            animation: fall 10s linear infinite;
            opacity: 0.6;
        }
        @keyframes fall {
            0% { transform: translateY(-100%) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }
        /* Walking character */
        .walker {
            position: absolute;
            bottom: 10%;
            left: -10%;
            width: 200px;
            animation: walk 20s linear infinite;
        }
        .walker img {
            width: 100%;
        }
        @keyframes walk {
            0% { transform: translateX(0) scaleX(1); }
            50% { transform: translateX(120vw) scaleX(1); }
            50.01% { transform: translateX(120vw) scaleX(-1); }
            100% { transform: translateX(0) scaleX(-1); }
        }
        /* Input animations */
        input:focus {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(79, 70, 229, 0); }
            100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); }
        }
        /* Neon effect for buttons */
        button.neon {
            box-shadow: 0 0 5px #fff, 0 0 25px #fff, 0 0 50px #fff, 0 0 100px #fff;
            animation: neonGlow 1.5s ease-in-out infinite alternate;
        }
        @keyframes neonGlow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073, 0 0 40px #e60073; }
            to { text-shadow: 0 0 20px #fff, 0 0 30px #ff4da6, 0 0 40px #ff4da6, 0 0 50px #ff4da6; }
        }
        /* Transitions */
        * {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="h-full text-gray-900 dark:text-gray-100 flex flex-col relative overflow-hidden">
    <!-- Particles Container -->
    <div id="particles-js" class="absolute inset-0 z-0"></div>

    <!-- Parallax Layers -->
    <div class="parallax-bg"></div>
    <div class="parallax-trees"></div>

    <!-- Falling Leaves -->
    <div class="leaves">
        <!-- Generate multiple leaves via JS -->
    </div>

    <!-- Walking Character -->
    <div class="walker">
        <img src="https://img.icons8.com/color/96/000000/businesswoman.png" alt="Walker">
    </div>

    <!-- Theme Toggle -->
    <button id="theme-toggle" class="fixed top-4 right-4 p-3 rounded-full bg-glass text-white hover:scale-110 z-50">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Navigation -->
    <nav class="bg-glass shadow-2xl z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <h1 class="text-3xl font-extrabold text-indigo-400 dark:text-indigo-300 neon">IDQR</h1>
                <div class="flex space-x-6">
                    <a href="#" class="text-lg hover:text-indigo-400 dark:hover:text-indigo-300 neon">QR-Коды</a>
                    <a href="#" class="text-lg hover:text-indigo-400 dark:hover:text-indigo-300 neon">Модули</a>
                    <a href="#" class="text-lg hover:text-indigo-400 dark:hover:text-indigo-300 neon">Пользователи</a>
                    <a href="#" class="text-lg hover:text-indigo-400 dark:hover:text-indigo-300 neon">Статистика</a>
                    <a href="#" class="text-lg hover:text-indigo-400 dark:hover:text-indigo-300 neon">Настройки</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="flex-grow flex items-center justify-center z-10">
        <div class="glass p-10 rounded-3xl w-full max-w-lg" data-tilt data-tilt-max="20" data-tilt-speed="400" data-tilt-perspective="1000">
            <h2 class="text-4xl font-bold text-center mb-8 text-indigo-600 dark:text-indigo-400 neon">Авторизация администратора</h2>
            
            {% if error %}
                <div class="mb-6 p-4 bg-red-500/20 text-red-300 rounded-xl animate-bounce">
                    {{ error }}
                </div>
            {% endif %}

            <form action="/login" method="POST" class="space-y-6">
                <div class="relative">
                    <input type="text" id="login" name="login" required class="w-full px-4 py-3 bg-transparent border border-indigo-300 dark:border-indigo-500 rounded-xl focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-400 placeholder-transparent peer">
                    <label for="login" class="absolute left-4 top-3 text-indigo-600 dark:text-indigo-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-6 peer-focus:text-sm">Логин</label>
                </div>
                <div class="relative">
                    <input type="password" id="password" name="password" required class="w-full px-4 py-3 bg-transparent border border-indigo-300 dark:border-indigo-500 rounded-xl focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-400 placeholder-transparent peer">
                    <label for="password" class="absolute left-4 top-3 text-indigo-600 dark:text-indigo-400 transition-all peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-focus:-top-6 peer-focus:text-sm">Пароль</label>
                    <button type="button" id="toggle-password" class="absolute right-4 top-3 text-indigo-600 dark:text-indigo-400">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <button type="submit" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-400 text-white font-bold rounded-xl shadow-lg neon">Войти в систему</button>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Particles.js
        particlesJS('particles-js', {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: '#ffffff' },
                shape: { type: 'circle' },
                opacity: { value: 0.5, random: false },
                size: { value: 3, random: true },
                line_linked: { enable: true, distance: 150, color: '#ffffff', opacity: 0.4, width: 1 },
                move: { enable: true, speed: 6, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
            },
            interactivity: {
                detect_on: 'canvas',
                events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
                modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 2, opacity: 8 }, repulse: { distance: 200 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } }
            },
            retina_detect: true
        });

        // Theme Toggle
        const toggleButton = document.getElementById('theme-toggle');
        const html = document.documentElement;
        if (localStorage.theme === 'dark' || (!localStorage.theme && matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
            toggleButton.innerHTML = '<i class="fas fa-sun"></i>';
        }
        toggleButton.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
            toggleButton.innerHTML = html.classList.contains('dark') ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        // 3D Tilt
        VanillaTilt.init(document.querySelector('.glass'), { max: 25, speed: 400 });

        // Password Toggle
        const passwordInput = document.getElementById('password');
        const togglePassword = document.getElementById('toggle-password');
        togglePassword.addEventListener('click', () => {
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
            togglePassword.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
        });

        // Generate Falling Leaves
        const leavesContainer = document.querySelector('.leaves');
        for (let i = 0; i < 20; i++) {
            const leaf = document.createElement('div');
            leaf.classList.add('leaf');
            leaf.style.left = `${Math.random() * 100}%`;
            leaf.style.animationDelay = `${Math.random() * 5}s`;
            leaf.style.animationDuration = `${10 + Math.random() * 10}s`;
            leavesContainer.appendChild(leaf);
        }

        // Parallax Effect on Mouse Move
        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth / 2 - e.clientX) / 50;
            const y = (window.innerHeight / 2 - e.clientY) / 50;
            document.querySelector('.parallax-bg').style.transform = `translate(${x}px, ${y}px) translateZ(-1px) scale(1.5)`;
            document.querySelector('.parallax-trees').style.transform = `translate(${x/2}px, ${y/2}px) translateZ(-0.5px) scale(1.25)`;
        });
    </script>
</body>
</html>