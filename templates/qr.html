<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Панель QR-кодов</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="navbar">
        <h1>IDQR: Панель QR-Кодов</h1>
        <nav>
            <a href="/dashboard/qr" class="{{ 'active' if active == 'qr' else '' }}">📦 QR-Коды</a>
            <a href="/dashboard/modules" class="{{ 'active' if active == 'modules' else '' }}">🧩 Модули</a>
            <a href="/dashboard/users" class="{{ 'active' if active == 'users' else '' }}">👤 Пользователи</a>
            <a href="/dashboard/stats" class="{{ 'active' if active == 'stats' else '' }}">📊 Статистика</a>
            <a href="/dashboard/settings" class="{{ 'active' if active == 'settings' else '' }}">⚙️ Настройки</a>
        </nav>
    </div>

    <div class="container">
        <!-- Форма генерации QR-кода -->
        <form method="post" action="/generate_qr" class="qr-form" style="margin-bottom: 30px;">
            <h2>Создание нового QR-Кода</h2>

            <div>
                <label>Название:</label>
                <input type="text" name="title" placeholder="Название" required style="width: 300px;">
            </div>

            <div>
                <label>Ссылка или данные:</label>
                <textarea name="qrdata" placeholder="Данные для кодирования" required style="width: 300px; height: 80px;"></textarea>
            </div>

            <div>
                <label>Цвет текста:</label>
                <input type="color" name="text_color" value="#FF0000">
            </div>

            <div style="margin-top: 10px;">
                <button type="submit">Генерировать</button>
            </div>
        </form>

        {% if qr_url %}
            <div class="qr-preview">
                <h3>Предпросмотр QR-кода:</h3>
                <img src="{{ qr_url }}" alt="QR">
            </div>
        {% endif %}

        <div class="qr-list" style="margin-top: 30px;">
            <h2>Список сгенерированных QR-кодов</h2>
            {% if qr_list %}
                <table>
                    <thead>
                        <tr>
                            <th>Название</th>
                            <th>Дата</th>
                            <th>Файл</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for qr in qr_list %}
                        <tr>
                            <td>{{ qr[1] }}</td>
                            <td>{{ qr[4] }}</td>
                            <td><a href="/static/qr/{{ qr[3] }}" target="_blank">Просмотр</a></td>
                            <td>
                                <a href="/delete_qr/{{ qr[0] }}" class="btn-delete">Удалить</a>
                                <a href="/static/qr/{{ qr[3] }}" download class="btn-share">Поделиться</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>QR-коды ещё не созданы.</p>
            {% endif %}
        </div>
    </div>
</body>
</html>
